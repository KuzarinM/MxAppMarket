<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - MxStore_CTL</title>
    <link rel="icon" type="image/svg+xml" href="~/favicon.svg">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Tailwind CSS + Plugins via CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        zinc: { 950: '#09090b', 900: '#18181b', 800: '#27272a', 700: '#3f3f46' },
                        emerald: { 400: '#34d399', 500: '#10b981', 900: '#064e3b' }
                    },
                    fontFamily: {
                        mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', "Liberation Mono", "Courier New", 'monospace'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body class="antialiased font-mono selection:bg-emerald-500/30 selection:text-emerald-200 flex flex-col min-h-screen">

    <!-- WRAPPER -->
    <div class="p-4 md:p-8 max-w-[1600px] mx-auto w-full flex-1 flex flex-col">

        <!-- HEADER -->
        <header class="mb-8 border-b border-zinc-800 pb-4">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <!-- Logo -->
                <div class="flex items-center gap-4 w-full md:w-auto">
                    <a asp-page="/Store/Index" class="group flex items-center gap-3">
                        <div class="w-10 h-10 bg-zinc-900 border border-zinc-700 flex items-center justify-center rounded shadow-[0_0_15px_rgba(16,185,129,0.1)] group-hover:border-emerald-500/50 transition">
                            <i class="bi bi-box-seam-fill text-emerald-500 text-xl group-hover:animate-pulse"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-zinc-100 tracking-widest">
                                Mx<span class="text-emerald-500">Store</span>
                            </h1>
                            <div class="text-[9px] text-emerald-500/60 uppercase tracking-[0.2em]">Internal Repository</div>
                        </div>
                    </a>
                </div>

                <!-- Navigation -->
                <nav class="flex items-center gap-2 flex-wrap justify-center md:justify-end">
                    <a asp-page="/Store/Index" class="nav-btn">[CATALOG]</a>

                    @if (User.IsInRole("Admin"))
                    {
                        <span class="text-zinc-700 mx-1">|</span>
                        <a asp-page="/Index" class="nav-btn text-emerald-400 border-emerald-900/30">[PACKAGES]</a>
                        <a asp-page="/Scan" class="nav-btn text-emerald-400 border-emerald-900/30">[SCANNER]</a>
                        <a asp-page="/Admin/Users" class="nav-btn text-emerald-400 border-emerald-900/30">[USERS]</a>
                    }

                    <span class="text-zinc-700 mx-1">|</span>

                    @if (User.Identity.IsAuthenticated)
                    {
                        <a asp-page="/Account/Profile" class="nav-btn flex items-center gap-2 group">
                            <i class="bi bi-person-circle"></i> @User.Identity.Name
                        </a>
                        <form method="post" asp-page="/Account/Logout" class="inline">
                            <button class="nav-btn text-red-500/70 border-red-900/20 hover:bg-red-900/10 hover:border-red-500/50">
                                [LOGOUT]
                            </button>
                        </form>
                    }
                    else
                    {
                        <a asp-page="/Account/Login" class="nav-btn bg-emerald-900/10 text-emerald-400 border-emerald-500/50 hover:bg-emerald-500 hover:text-black">
                            [LOGIN]
                        </a>
                    }
                </nav>
            </div>
        </header>

        <!-- CONTENT -->
        <main role="main" class="flex-1">
            @RenderBody()
        </main>

        <!-- FOOTER -->
        <footer class="mt-12 border-t border-zinc-800 pt-6 text-center text-[10px] text-zinc-600 uppercase tracking-widest">
            &copy; @DateTime.Now.Year MxStore_SYSTEM <span class="mx-2">//</span> POWERED BY RAZOR & TAILWIND
        </footer>
    </div>

    @await RenderSectionAsync("Scripts", required: false)

    <style>
    </style>
    <!-- Подключаем скрипты валидации, если они нужны глобально -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
</body>
</html>